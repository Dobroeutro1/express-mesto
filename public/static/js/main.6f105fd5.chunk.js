(this["webpackJsonpmesto-react"]=this["webpackJsonpmesto-react"]||[]).push([[0],{16:function(e,t,n){"use strict";n.r(t);var a=n(0),c=n(1),o=n.n(c),i=n(7),s=n.n(i),r=(n(6),n(10)),u=n(2);var l=function(){return Object(a.jsx)("header",{className:"header",children:Object(a.jsx)("img",{src:"data:image/png;base64,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",alt:"\u041b\u043e\u0433\u043e\u0442\u0438\u043f Mesto Russia",className:"logo"})})};var p=function(){return Object(a.jsx)("footer",{className:"footer",children:Object(a.jsx)("p",{className:"footer__copy",children:"\xa9 2020 Mesto Russia"})})};var d=function(e){var t=e.card,n=e.link,c=e.name,o=e.likes,i=e.onCardClick,s=e.onCardLike,r=e.onCardDelete,u=e.isOwn,l=e.isLiked,p="card__trash-btn ".concat(u?"card__trash-btn_visible":"card__trash-btn_hidden"),d="card__like-btn ".concat(l?"card__like-btn_liked":"");return Object(a.jsxs)("div",{className:"card",children:[Object(a.jsx)("img",{src:n,alt:c,className:"card__img",onClick:function(){i(t)}}),Object(a.jsxs)("div",{className:"card__item",children:[Object(a.jsx)("h2",{className:"card__title",children:c}),Object(a.jsxs)("div",{className:"card__like",children:[Object(a.jsx)("button",{className:d,onClick:function(){s(t)}}),Object(a.jsx)("p",{className:"card__like-counter",children:o.length})]})]}),Object(a.jsx)("button",{className:p,onClick:function(){r(t)}})]})},j=o.a.createContext(),h=o.a.createContext();var b=function(e){var t=e.onEditProfile,n=e.onEditAvatar,c=e.onAddPlace,i=e.onCardClick,s=e.onCardLike,r=e.onCardDelete,u=o.a.useContext(j),l=o.a.useContext(h);return Object(a.jsxs)("main",{className:"content",children:[Object(a.jsxs)("section",{className:"profile",children:[Object(a.jsx)("div",{className:"profile__img",onClick:n,children:Object(a.jsx)("img",{src:u.avatar,alt:"\u0410\u0432\u0430\u0442\u0430\u0440",className:"profile__avatar"})}),Object(a.jsxs)("div",{className:"profile__info",children:[Object(a.jsxs)("div",{className:"profile__top",children:[Object(a.jsx)("h1",{className:"profile__title",children:u.name}),Object(a.jsx)("button",{className:"profile__edit-btn",onClick:t})]}),Object(a.jsx)("p",{className:"profile__subtitle",children:u.about})]}),Object(a.jsx)("button",{className:"profile__add-btn",onClick:c})]}),Object(a.jsx)("div",{className:"cards",children:l.map((function(e){var t=e.owner._id===u._id,n=e.likes.some((function(e){return e._id===u._id}));return Object(a.jsx)(d,{card:e,likes:e.likes,name:e.name,link:e.link,onCardClick:i,onCardLike:s,onCardDelete:r,isOwn:t,isLiked:n},e._id)}))})]})};var m=function(e){var t=e.name,n=e.title,c=e.children,o=e.isOpen,i=e.onClose,s=e.onSubmit;return Object(a.jsx)("section",{className:"popup popup_type_".concat(t," ").concat(o?"popup_opened":""),children:Object(a.jsxs)("div",{className:"popup__container",children:[Object(a.jsx)("h2",{className:"popup__title",children:n}),Object(a.jsx)("form",{action:"#",className:"popup__form popup__form-".concat(t),noValidate:!0,onSubmit:s,children:c}),Object(a.jsx)("button",{className:"popup__close-btn",onClick:i})]})})};var f=function(e){var t=e.card,n=e.onClose;return Object(a.jsx)("section",{className:"popup ".concat(t&&"popup_opened"),"data-popup-name":"popup-image",children:Object(a.jsxs)("div",{className:"popup__container popup__container-image",children:[Object(a.jsx)("img",{src:t.link,alt:t.name,className:"popup__image"}),Object(a.jsx)("h2",{className:"popup__title-img",children:t.name}),Object(a.jsx)("button",{className:"popup__close-btn popup__close-btn-img",onClick:n})]})})};var O=function(e){var t=e.isOpen,n=e.onClose,c=e.onUpdateUser,i=o.a.useContext(j),s=o.a.useState(""),r=Object(u.a)(s,2),l=r[0],p=r[1],d=o.a.useState(""),h=Object(u.a)(d,2),b=h[0],f=h[1];return o.a.useEffect((function(){p(i.name),f(i.about)}),[i]),Object(a.jsx)(m,{name:"profile",title:"\u0420\u0435\u0434\u0430\u043a\u0442\u0438\u0440\u043e\u0432\u0430\u0442\u044c \u043f\u0440\u043e\u0444\u0438\u043b\u044c",isOpen:t,onClose:n,onSubmit:function(e){e.preventDefault(),n(),c({name:l,about:b})},children:Object(a.jsxs)(a.Fragment,{children:[Object(a.jsx)("input",{className:"popup__input popup__input_name",type:"text",name:"name",id:"name-profile",value:l,required:!0,minLength:"2",maxLength:"40",onChange:function(e){p(e.target.value)}}),Object(a.jsx)("span",{className:"popup__input-error",id:"name-profile-error"}),Object(a.jsx)("input",{className:"popup__input popup__input_title",type:"text",name:"link",id:"about-profile",value:b,required:!0,minLength:"2",maxLength:"200",onChange:function(e){f(e.target.value)}}),Object(a.jsx)("span",{className:"popup__input-error",id:"about-profile-error"}),Object(a.jsx)("button",{type:"submit",className:"popup__save-btn popup__save-profile",children:Object(a.jsx)("span",{children:"\u0421\u043e\u0445\u0440\u0430\u043d\u0438\u0442\u044c"})})]})})};var _=function(e){var t=e.isOpen,n=e.onClose,c=e.onUpdateAvatar,i=o.a.useRef();return Object(a.jsx)(m,{name:"update",title:"\u041e\u0431\u043d\u043e\u0432\u0438\u0442\u044c \u0430\u0432\u0430\u0442\u0430\u0440",isOpen:t,onClose:n,onSubmit:function(e){e.preventDefault(),n(),c({avatar:i.current.value})},children:Object(a.jsxs)(a.Fragment,{children:[Object(a.jsx)("input",{className:"popup__input popup__input_title",type:"URL",name:"link",id:"link-popup",placeholder:"\u0421\u0441\u044b\u043b\u043a\u0430 \u043d\u0430 \u043a\u0430\u0440\u0442\u0438\u043d\u043a\u0443",required:!0,ref:i}),Object(a.jsx)("span",{className:"popup__input-error",id:"link-popup-error"}),Object(a.jsx)("button",{type:"submit",className:"popup__save-btn popup__save-profile",children:Object(a.jsx)("span",{children:"\u0421\u043e\u0445\u0440\u0430\u043d\u0438\u0442\u044c"})})]})})};var x=function(e){var t=e.isOpen,n=e.onClose,c=e.onAddPlace,i=o.a.useState(""),s=Object(u.a)(i,2),r=s[0],l=s[1],p=o.a.useState(""),d=Object(u.a)(p,2),j=d[0],h=d[1];return Object(a.jsx)(m,{name:"card",title:"\u041d\u043e\u0432\u043e\u0435 \u043c\u0435\u0441\u0442\u043e",isOpen:t,onClose:n,onSubmit:function(e){e.preventDefault(),c({name:r,link:j})},children:Object(a.jsxs)(a.Fragment,{children:[Object(a.jsx)("input",{className:"popup__input popup__input_name",type:"text",name:"name",id:"name-card",placeholder:"\u041d\u0430\u0437\u0432\u0430\u043d\u0438\u0435",required:!0,minLength:"1",maxLength:"30",onChange:function(e){l(e.target.value)}}),Object(a.jsx)("span",{className:"popup__input-error",id:"name-card-error"}),Object(a.jsx)("input",{className:"popup__input popup__input_title",type:"URL",name:"link",id:"link-card",placeholder:"\u0421\u0441\u044b\u043b\u043a\u0430 \u043d\u0430 \u043a\u0430\u0440\u0442\u0438\u043d\u043a\u0443",required:!0,onChange:function(e){h(e.target.value)}}),Object(a.jsx)("span",{className:"popup__input-error",id:"link-card-error"}),Object(a.jsx)("button",{type:"submit",className:"popup__save-btn popup__create-card",onClick:n,children:Object(a.jsx)("span",{className:"popup__create-card",children:"\u0421\u043e\u0437\u0434\u0430\u0442\u044c"})})]})})},k=n(8),g=n(9),v=new(function(){function e(t,n){var a=t.baseUrl,c=t.authorization;Object(k.a)(this,e),this.baseUrl=a,this.authorization=c,this.group=n}return Object(g.a)(e,[{key:"getUserInfo",value:function(){return fetch("".concat(this.baseUrl,"/").concat(this.group,"/users/me"),{headers:{authorization:"".concat(this.authorization)}}).then((function(e){return e.ok?e.json():Promise.reject("\u041e\u0448\u0438\u0431\u043a\u0430: ".concat(e.status))}))}},{key:"getInitialCards",value:function(){return fetch("".concat(this.baseUrl,"/").concat(this.group,"/cards"),{headers:{authorization:"".concat(this.authorization)}}).then((function(e){return e.ok?e.json():Promise.reject("\u041e\u0448\u0438\u0431\u043a\u0430: ".concat(e.status))}))}},{key:"changeUserInfo",value:function(e,t){return fetch("".concat(this.baseUrl,"/").concat(this.group,"/users/me"),{method:"PATCH",headers:{authorization:"".concat(this.authorization),"Content-Type":"application/json"},body:JSON.stringify({name:e,about:t})}).then((function(e){return e.ok?e.json():Promise.reject("\u041e\u0448\u0438\u0431\u043a\u0430: ".concat(e.status))}))}},{key:"changeUserAvatar",value:function(e){return fetch("".concat(this.baseUrl,"/").concat(this.group,"/users/me/avatar"),{method:"PATCH",headers:{authorization:"".concat(this.authorization),"Content-Type":"application/json"},body:JSON.stringify({avatar:e})}).then((function(e){return e.ok?e.json():Promise.reject("\u041e\u0448\u0438\u0431\u043a\u0430: ".concat(e.status))}))}},{key:"addNewCard",value:function(e){return fetch("".concat(this.baseUrl,"/").concat(this.group,"/cards"),{method:"POST",headers:{authorization:"".concat(this.authorization),"Content-Type":"application/json"},body:JSON.stringify({name:e.name,link:e.link})}).then((function(e){return e.ok?e.json():Promise.reject("\u041e\u0448\u0438\u0431\u043a\u0430: ".concat(e.status))}))}},{key:"deleteCard",value:function(e){return fetch("".concat(this.baseUrl,"/").concat(this.group,"/cards/").concat(e),{method:"DELETE",headers:{authorization:"".concat(this.authorization),"Content-Type":"application/json"}}).then((function(e){return e.ok?e.json():Promise.reject("\u041e\u0448\u0438\u0431\u043a\u0430: ".concat(e.status))}))}},{key:"addLike",value:function(e){return fetch("".concat(this.baseUrl,"/").concat(this.group,"/cards/likes/").concat(e._id),{method:"PUT",headers:{authorization:"".concat(this.authorization),"Content-Type":"application/json"}}).then((function(e){return e.ok?e.json():Promise.reject("\u041e\u0448\u0438\u0431\u043a\u0430: ".concat(e.status))}))}},{key:"deleteLike",value:function(e){return fetch("".concat(this.baseUrl,"/").concat(this.group,"/cards/likes/").concat(e._id),{method:"DELETE",headers:{authorization:"".concat(this.authorization),"Content-Type":"application/json"}}).then((function(e){return e.ok?e.json():Promise.reject("\u041e\u0448\u0438\u0431\u043a\u0430: ".concat(e.status))}))}}]),e}())({baseUrl:"https://mesto.nomoreparties.co/v1/",authorization:"8176c3f4-76a7-481c-9a33-49a36549538f"},"cohort-17");var C=function(){var e=o.a.useState(!1),t=Object(u.a)(e,2),n=t[0],c=t[1],i=o.a.useState(!1),s=Object(u.a)(i,2),d=s[0],k=s[1],g=o.a.useState(!1),C=Object(u.a)(g,2),A=C[0],N=C[1],U=o.a.useState(!1),w=Object(u.a)(U,2),z=w[0],P=w[1],L=o.a.useState({}),y=Object(u.a)(L,2),S=y[0],T=y[1],E=o.a.useState([]),M=Object(u.a)(E,2),D=M[0],R=M[1];function J(){k(!1),c(!1),N(!1),P(!1)}return o.a.useEffect((function(){Promise.all([v.getUserInfo(),v.getInitialCards()]).then((function(e){var t=Object(u.a)(e,2),n=t[0],a=t[1];T(n),R(a)})).catch((function(){console.log("\u0427\u0442\u043e-\u0442\u043e \u043f\u043e\u0448\u043b\u043e \u043d\u0435 \u0442\u0430\u043a :(")}))}),[]),Object(a.jsx)(a.Fragment,{children:Object(a.jsxs)(j.Provider,{value:S,children:[Object(a.jsx)(l,{}),Object(a.jsx)(h.Provider,{value:D,children:Object(a.jsx)(b,{onEditProfile:function(){c(!0)},onAddPlace:function(){k(!0)},onEditAvatar:function(){N(!0)},onCardClick:function(e){P(e)},onCardLike:function(e){var t=e.likes.some((function(e){return e._id===S._id}));t?v.deleteLike(e,t).then((function(t){var n=D.map((function(n){return n._id===e._id?t:n}));R(n)})).catch((function(){console.log("\u0427\u0442\u043e-\u0442\u043e \u043f\u043e\u0448\u043b\u043e \u043d\u0435 \u0442\u0430\u043a :(")})):v.addLike(e,!t).then((function(t){var n=D.map((function(n){return n._id===e._id?t:n}));R(n)})).catch((function(){console.log("\u0427\u0442\u043e-\u0442\u043e \u043f\u043e\u0448\u043b\u043e \u043d\u0435 \u0442\u0430\u043a :(")}))},onCardDelete:function(e){v.deleteCard(e._id).then((function(){var t=D.filter((function(t){return t._id!==e._id}));R(t)})).catch((function(){console.log("\u0427\u0442\u043e-\u0442\u043e \u043f\u043e\u0448\u043b\u043e \u043d\u0435 \u0442\u0430\u043a :(")}))}})}),Object(a.jsx)(p,{}),Object(a.jsx)(O,{isOpen:n,onClose:J,onUpdateUser:function(e){v.changeUserInfo(e.name,e.about).then((function(e){T(e)})).catch((function(){console.log("\u0427\u0442\u043e-\u0442\u043e \u043f\u043e\u0448\u043b\u043e \u043d\u0435 \u0442\u0430\u043a :(")}))}}),Object(a.jsx)(x,{isOpen:d,onClose:J,onAddPlace:function(e){v.addNewCard(e).then((function(e){R([e].concat(Object(r.a)(D)))})).catch((function(){console.log("\u0427\u0442\u043e-\u0442\u043e \u043f\u043e\u0448\u043b\u043e \u043d\u0435 \u0442\u0430\u043a :(")}))}}),Object(a.jsx)(m,{name:"confirm",title:"\u0412\u044b \u0443\u0432\u0435\u0440\u0435\u043d\u044b?",onClose:J,children:Object(a.jsx)(a.Fragment,{children:Object(a.jsx)("button",{type:"submit",className:"popup__save-btn popup__confirm-btn",children:Object(a.jsx)("span",{children:"\u0414\u0430"})})})}),Object(a.jsx)(_,{isOpen:A,onClose:J,onUpdateAvatar:function(e){v.changeUserAvatar(e.avatar).then((function(e){T(e)})).catch((function(){console.log("\u0427\u0442\u043e-\u0442\u043e \u043f\u043e\u0448\u043b\u043e \u043d\u0435 \u0442\u0430\u043a :(")}))}}),Object(a.jsx)(f,{card:z,onClose:J})]})})},A=function(e){e&&e instanceof Function&&n.e(3).then(n.bind(null,17)).then((function(t){var n=t.getCLS,a=t.getFID,c=t.getFCP,o=t.getLCP,i=t.getTTFB;n(e),a(e),c(e),o(e),i(e)}))};s.a.render(Object(a.jsx)(o.a.StrictMode,{children:Object(a.jsx)(C,{})}),document.getElementById("root")),A()},6:function(e,t,n){}},[[16,1,2]]]);
//# sourceMappingURL=main.6f105fd5.chunk.js.map